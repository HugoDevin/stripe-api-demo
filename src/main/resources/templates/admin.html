<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>商品管理後台</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 24px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #f4f4f4; }
        .message { color: #1e7e34; margin-bottom: 16px; }
        .actions { display: flex; gap: 8px; align-items: center; }
        input[type='number'] { width: 100px; }
    </style>
</head>
<body>
<h1>商品管理後台</h1>
<p th:if="${message}" class="message" th:text="${message}"></p>
<table>
    <thead>
    <tr>
        <th>商品名稱</th>
        <th>價格 (分)</th>
        <th>狀態</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="product : ${products}">
        <td th:text="${product.name}"></td>
        <td th:text="${product.price}"></td>
        <td th:text="${product.active ? '上架中' : '已下架'}"></td>
        <td>
            <div class="actions">
                <form th:action="@{/admin/products/price}" method="post">
                    <input type="hidden" name="productName" th:value="${product.name}">
                    <input type="number" min="1" name="price" th:value="${product.price}" required>
                    <button type="submit">更新價格</button>
                </form>

                <form th:action="@{/admin/products/status}" method="post">
                    <input type="hidden" name="productName" th:value="${product.name}">
                    <input type="hidden" name="active" th:value="${!product.active}">
                    <button type="submit" th:text="${product.active ? '下架' : '上架'}"></button>
                </form>
            </div>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>
